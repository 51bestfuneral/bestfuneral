<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="head">
<title>念念--产品分类</title>
<link href="/js/images/niannian.ico" rel="shortcut icon" />
<meta name="description" content="念念网致力于打造智能葬礼产品和服务定制工具。念念主张“不要让你爱的人走的太匆忙”，鼓励充分尊重逝者意愿的提前定制，已实现“殡葬服务价格透明化、互联网化、个性化”为己任 。念念，也是中国最大的日系骨灰盒骨灰坛销售公司，最有特色的祭扫祭祀用品服务商。" /> 
<meta name="keywords" content="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务,上海墓地， 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务，私人定制，生前契约，葬礼保险,提前定制" /> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
<meta http-equiv="pragma" content="no-cache" /> 
<meta http-equiv="content-style-type" content="text/css" /> 
<meta http-equiv="content-script-type" content="text/javascript" /> 
</head>
<link href="/css/specificProduct.css" rel="stylesheet">
<script src="/js/jquery-2.1.4.js"></script>
<script src="/js/jquery-ui.js"></script>
<script src="/js/sliderx.js"></script>
<script src="/js/angular-1.4.0-rc.2/angular.js"></script>
<link href="/js/bootstrap-3.3.6-dist/css/bootstrap.css" rel="stylesheet">
<script src="/js/bootstrap-3.3.6-dist/js/bootstrap.js"></script>
<script src="/js/generalUsage.js"></script>

<body onselectstart="return false"  ng-app="productApp" ng-controller="products">
<div class="topBarDiv">
    <IFRAME NAME="content_frame" width=100% SRC="component/topBar.html?cat=product" frameborder = 0 height = "67px"></IFRAME>
</div>
<div class="container">
    <div id="header">
	    <h1>����ǻҺ�</h1>
	</div>
	<div id="filterBar">
	    <div id="colorFilter">
		    <div class="topHalfHeader">
			    <p>��ɫ</p>
			</div>
			<div class="bottomHalf">
			    <div class="optionIcon">
				</div>
				<div class="optionIcon">
				</div>
				<div class="optionIcon">
				</div>
				<div class="optionIcon">
				</div>
				<div class="optionIcon">
				</div>
				<div class="optionIcon">
				</div>
				<div class="optionIcon">
				</div>
				<div class="optionIcon">
				</div>
				<div class="optionIcon">
				</div>
				<div class="optionIcon">
				</div>
			</div>
		</div>
		<div id="sizeFilter">
		    <div class="topHalfHeader">
			    <p>��С</p>
			</div>
			<div class="bottomHalf">
			    <div class="optionIcon">
				    <p>�ش�</p>
				</div>
				<div class="optionIcon">
				    <p>��</p>
				</div>
				<div class="optionIcon">
				    <p>�е�</p>
				</div>
				<div class="optionIcon">
				    <p>С</p>
				</div>
				<div class="optionIcon">
				    <p>����</p>
				</div>
			</div>
		</div>
		<div id="priceFilter">
		    <div class="topHalfHeader">
			    <p>�۸�</p>
			</div>
		    <div id="box">
				<div id="bg">
					<div id="bgcolor"></div>
					<div id="bgcolorRight"></div>
				</div>
				<div id="btLeft"></div>
				<div id="btRight"></div>
			</div>
			<div id="text"></div>
		</div>
    </div>
	<div id="product">
	    <div class="item {{layout.active}}" alt="Second slide" ng-repeat="layout in layouts">
	                <div class="productItem" id="{{itemLayout.wishId}}" ng-repeat="itemLayout in layout.itemLayout track by $index">
		                <div class="imageDiv">
						    <img src="..//js/images/product1.png" class="image"></img>
						</div>
						<div class="productText">
						    <div class="productInfo">
							    <p class="header">{{itemLayout.wishName}}</p>
								<p class="detail">��������ײ���(ԭ��:��{{itemLayout.price}})</p>
								<div class="addWishButton" onselectstart="return false">
								    <img src="..//js/images/addWish.png"></img>
								    <p>�����Ը���嵥</p>
								</div>
							</div>
							<div class="moreInfo"><a href="{{itemLayout.url}}" class="moreInfo">�˽�����</a></div>
						</div>
		            </div>
                </div>
	</div>
<IFRAME NAME="content_frame" width=100% height=246 marginwidth=0 marginheight=0 SRC="component/bottomBar.html" frameborder = 0></IFRAME>
</body>
<script type="text/javascript">
var app = angular.module('productApp', []);
var filter = location.search,
	wishList,
	usrId = 1;

app.controller('products', function($scope, $http) {
	$http.get("/wishlist/list?userId="+usrId).success(function(response) {
	    wishList = response;
		function validateInList() {
	    $.ajax({
			url: '/wishlistDetail/list?wishlistId='+wishList[0].wishlistId,
			type: 'get',
			success:function(data){
				var response = data;
				for (var i=0;i<response.length;i++) {
				    var wishInList = response[i];
					if ($("#"+wishInList.wishId).length > 0) {
					    $("#"+wishInList.wishId).find(".addWishButton").addClass("disableDiv");
					}
				}
				if ($(".disableDiv").length>0) {
				    for (var i=0;i<$(".disableDiv").length;i++) {
				        $(".disableDiv").find("p")[i].innerText = "�Ѽ���Ը���嵥";
					}
				}
			},
			error: function(error) {
				var response = error;
				//$(".disableDiv").find("p")[0].innerText = "�Ѽ���Ը���嵥";
			}
		});
	}
	validateInList();
	});
	$http.get("/wish/list"+filter).success(function(response) {
	    var j = 1,
		    counter = 1,
		    numberInRow = 4,
			objectsInRow = [],
			layouts = [];
		for (var i=0;i<response.length;i++) {
		    var singleProduct = response[i];

			if (j <= numberInRow) {
			    objectsInRow.push(singleProduct);
			}

			if (j === numberInRow || i === response.length-1) {
			    var layout = {},
				    active = '',
					itemLayout = objectsInRow;
					
				if (counter === 1) {
				    active = 'active'
				}
				layout = {
				    'index': counter,
					'active': active,
					'itemLayout': itemLayout
				};
				layouts.push(layout);
			    j = 0;
				counter++;
				objectsInRow = [];
			}
			j++;
		}
		$scope.layouts = layouts;
	});
});
</script>
 <script type="text/javascript">
 (function($){
  var $box = $('#box');
  var $bg = $('#bg');
  var $bgcolor = $('#bgcolor');
  var $bgcolorRight = $('#bgcolorRight');
  var $btn = $('#btLeft');
  var $btn1 = $('#btRight');
  var $text = $('#text');
  var statuLeft = false;
  var statuRight = false;
  var ox = 0;
  var ox2 = 0;
  var lx = 0;
  var lx2 = 0;
  var left = 0;
  var right = 0;
  var bgleft = 0;
   $btn.mousedown(function(e){
    lx = $btn.offset().left;
    ox = e.pageX - left;
    statuLeft = true;
   });
   $btn1.mousedown(function(e){
    lx2 = $btn1.offset().left;
    ox2 = e.pageX + right;
    statuRight = true;
   });
   $(document).mouseup(function(){
       statuLeft = false;
       statuRight = false;
   });
   $box.mousemove(function(e){
    if(statuLeft){
     left = e.pageX - ox;
     if(left < 0){
      left = 0;
     }
     if(left > $('#box').width()-right){
      left = $('#box').width()-right;
     }
     $btn.css('left',left);
     $bgcolor.width(left);
     $text.html('λ��:' + parseInt((($('#box').width()-left-right)/$('#box').width())*100) + '%');
    }
	if(statuRight){
	 right = ox2 - e.pageX;
	 if(right < 0){
      right = 0;
     }
     if(right > $('#box').width()-left){
      right = $('#box').width()-left;
     }
	 $btn1.css('right',right);
     $bgcolorRight.width(right);
     $text.html('λ��:' + parseInt((($('#box').width()-left-right)/$('#box').width())*100) + '%');
    }
   });
 })(jQuery);
 </script>
</html>