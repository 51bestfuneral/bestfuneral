<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="head"><title>
    shopping cart
</title><meta name="description" content="Bleum provides high performance software development teams that
								deliver smart solutions, helping you to exceed your customersÔΩø
								expectations for timely product delivery, zero defects, and a
								superior customer experience." /> 
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
<meta http-equiv="pragma" content="no-cache" /> 
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-script-type" content="text/javascript" /> 
<script src="/funeral/js/jquery-2.1.4.js"></script>
<script src="/funeral/js/jquery-ui.js"></script>
<script src="/funeral/js/sliderx.js"></script>
<script src="/funeral/js/angular-1.4.0-rc.2/angular.js"></script>
<link href="/funeral/js/bootstrap-3.3.6-dist/css/bootstrap.css" rel="stylesheet">
<script src="/funeral/js/bootstrap-3.3.6-dist/js/bootstrap.js"></script>
<link href="/funeral/pages/component/css/secondLevelMenu.css" rel="stylesheet">
<script src="/funeral/js/generalUsage.js"></script>
</head>
<header>
</header>
<style>
.topBarDiv {
    box-shadow: 0px 2px 4px 0px rgba(162, 162, 162, 0.5);
	height: 65px;
	z-index: 100;
}
@media (min-width: 900px) {
  .container {
    width: 100%;
	padding: 0px;
	min-width: 1000px;
  }
}
.container {
    background: #F7F7F7;
}
#decorContainer {
    width: 1040px;
	margin: 0px auto;
	overflow: auto;
}
#tableHeader {
    width: 100%;
	overflow: auto;
}
#headerLeft {
    float: left;
	overflow: auto;
	text-align: left;
}
#headerLeft h1 {
    font-size: 32px;
	line-height: 95px;
	color: #3d3d3d;
	margin: 0px;
}
#headerRight {
    float: right;
	overflow: auto;
}
.rightImg {
    overflow: auto;
	float: right;
	height: 100%;
	margin-left: 10px;
}
.fakeImg {
	height: 95px;
}
.realImg {
    vertical-align: middle;
}
#shopTable {
    width: 100%;
	overflow: auto;
	padding-bottom: 22px;
	background: #ffffff;
}
#tableHeader {
    width: 100%;
	overflow: auto;
	background: #f2f2f2;
	box-shadow: 0px 2px 4px 0px rgba(162, 162, 162, 0.5);
}
#tableHeader div {
    float: left;
	text-align: center;
	height: 55px;
}
.tableContent {
    width: 100%;
	margin-top: 22px;
	overflow: auto;
}
.tableContent div {
	text-align: center;
	float: left;
}
.checkBox {
    width: 58px;
}
#tableHeader .checkBox input {
	margin-top: 22px;
}
.tableContent .checkBox input {
	margin:auto;
	margin-top: 32px;
}
.itemName {
    width: 422px;
	text-align: left!important;
}
.itemPrice {
    width: 140px;
}
.itemAmout {
    width: 140px;
}
.totalPrice {
    width: 140px;
}
.operation {
    width: 140px;
}
.operation span {
    color: #a6a6a6;
	font-size: 20px;
	cursor: pointer;
}
.title {
    font-size: 16px;
	color: #5b5b5b;
	margin: 0px;
	font-weight: bold;
}
.subTitle {
    font-size: 12px;
	color: #1c3653;
	line-height: 20px;
	margin: 0px;
}
#tableHeader .title {
    line-height: 55px;
}
.itemImg {
    width: 78px;
	height: 78px;
	background: #d8d8d8;
	cursor: pointer;
}
.itemImg:hover {
    border: 0px solid #ff5274;
}

.itemImg img{
	  width: 78px;
	height: 78px;
	}
.inputContent {
    padding-top: 14px;
}
.itemDesc {
    text-align: left!important;
	padding-left: 18px;
}
.itemDesc .title {
    cursor: pointer;
}
.itemDesc .title:hover {
    color: red;
}
#shopSumm {
    padding-left: 59px;
	padding-right: 71px;
	padding-bottom: 39px;
	padding-top: 24px;
	overflow: auto;
	background: #f2f2f2;
}
#leftSumm {
    float: left;
	width: 100%;
	margin-top: 15px;
}
.continue {
    overflow: auto;
	float: left;
}
.continue button {
    border: 1px solid #d7d7d7;
	background: #fff;
	color: #ff5274;
	border-radius: 4px;
	margin: 0px;
	font-size: 18px;
	width: 142px;
	height: 44px;
	font-family: "Microsoft Yahei";
}
#rightSumm {
    float: right;
	overflow: auto;
	width: 100%;
}
#rigthTop {
    overflow: auto;
	width: 100%;
}
#rigthTop div {
    float: right;
	text-align: right;
}
#rigthBottom {
    overflow: auto;
	text-align: right;
}
.next {
    overflow: auto;
    float: right;
}
.next button {
    width: 178px;
	height: 44px;
	border-radius: 4px;
	background: #ff5274;
	color: #ffffff;
	font-size: 18px;
	border: none;
	float: right;
	font-family: "Microsoft Yahei";
}
.next button:hover {
    background: #ff496d;
}
.summTitle {
    font-size: 20px;
	color: #5b5b5b;
	font-weight: bold;
	margin: 0px;
}
.titleNumber {
    color: #ff5274;
	padding-top: 0.4px;
}


.titleNumbere {
    color: #ff5274;
	padding-top: 0.4px;
}

.titleNumber {
    color: #ff5274;
	padding-top: 0.4px;
}

#rigthTopContent {
    padding-right: 18px;
}
.oneThird {
    width: 33.33%;
	height: 100%;
    float: left;
}
.changeButton {
    background: #ccc;
	width: 20px;
	height: 20px!important;
	border-radius: 10px;
	cursor: pointer;
}
.changeButton:hover {
    opacity: 0.6;
}
.minusBitton {
    float: right!important;
}
.coverDiv {
    height: auto;
	width: 100%;
	top: 30px;
	bottom: 60px;
	text-align: center;
	position: fixed;
	z-index: 1001;
}
.coverDiv .detailFrame {
    height: 100%;
}
.closeCoverDiv {
	position: absolute;
	top: 0px;
	width: 35px;
	height: 35px;
	border-radius: 17px;
	border: 2px solid #979797;
	color: #979797;
	font-size: 30px;
	text-align: center;
	line-height: 35px;
	cursor: pointer;
}
.closeCoverDiv:hover {
	color: yellow;
	border: 2px solid yellow;
}
.coverImageDiv {
    height: auto;
	width: 100%;
	top: 30px;
	bottom: 60px;
	text-align: center;
	position: fixed;
	z-index: 1001;
}
#noAnyProduct{
	text-align:center;
	}

#noAnyProduct h1 {
    line-height: 200px;
	margin:0px;
	

}
#goShoppingButton {
    width: 220px;
	height: 70px;
	background: #ff5274;
	border-radius: 5px;
	text-align: center;
	margin-top: -50px;
	cursor:pointer;
	opacity: 0.8;
	position:relative;
	left:40%;
}
#goShoppingButton:hover {
    opacity: 1;
}
#goShoppingButton h2 {
    line-height: 70px;
	margin: 0px;
	color: #ffffff;
}
</style>
<script type="text/javascript">
var app = angular.module('productApp', []);
app.controller('product', function($scope, $http) {
	$scope.shappingCart;
	$scope.wishList;
	$http.get("/funeral/shoppingCartController/getCart").success(function(response) {
	    $scope.cartId = response;
		$http.get("/funeral/shoppingCartController/getDirectWishListForShoppingCart").success(function(response) {
		    $scope.shoppingCartDetails = response;
			if (response.length <= 0) {
				$("#topCheckBox").attr('disabled',true); 
	            $("#noAnyProduct").show();
			}else{
			    $("#topCheckBox").attr('disabled',false); 
	        }
			angular.forEach(shoppingCartDetails, function(data,index,array){
	             $("#"+shoppingCartDetails[index]).attr("checked",'checked');   
	        });
		});
		$http.get("/funeral/shoppingCartController/listCart").success(function(response) {
		    $scope.shappingCart = response;
		    var gross=response.price;
		    if( gross>0   ){
		  	    $("#nextButton").attr('disabled',false); 
		  	} else{
		   	    $("#nextButton").attr('disabled',true); 
		   	}
		    if($scope.shappingCart.allSelected==1){
		        $("#topCheckBox").attr("checked",'checked'); 
		    }
		    var detailIdList =$scope.shappingCart.selectedWishDetailIdList;
	    });
	});
	$scope.loadShoppingCart(); 
	$scope.changeOneItem = function(wishDetaillistId,wishlistId){
	    $http.get("/funeral/shoppingCartController/selectOneItem?cartDetailId="+cartDetailId+"&cartId="+$scope.cartId).success(function(response) {
		    $scope.loadShoppingCart();
		});
	}
	$scope.subtraction = function(wishDetailId){
	    $http.get("/funeral/shoppingCartController/subtraction?cartDetailId="+cartDetailId).success(function(response) {
		    $scope.loadShoppingCart();
		});
	}
	$scope.delete = function(wishDetailId){
	    $http.get("/funeral/shoppingCartController/delete?cartDetailId="+cartDetailId).success(function(response) {
	        $scope.loadShoppingCart();
		});
	}
	$scope.add = function(cartDetailId){
	    $http.get("/funeral/shoppingCartController/oneMore?cartDetailId="+cartDetailId).success(function(response) {
		    $scope.loadShoppingCart();
		});
	}
	$scope.selectAll = function(){
		$http.get("/funeral/shoppingCartController/selectAll?cartId="+$scope.cartId).success(function(response) {
		   $scope.loadShoppingCart();
		});
	}
});
</script>
<body ng-app="productApp" ng-controller="product">
	
<div style="display:none;" id="calcu" ng-click="loadShoppingCart()">	</div>
	
<div class="topBarDiv">
    <IFRAME NAME="content_frame" width=100% SRC="component/topBar.html?cat=product" frameborder = 0 height = "67px"></IFRAME>
</div>
<div class="container"  ng-cloak>
    <div id="decorContainer">
	    <div id="pageHeader">
		    <div id="headerLeft">
			    <h1>≈∫¬µƒπ¬∫œØ¬≥¬µ</h1>
			</div>
			<div id="headerRight">
			    <div class="rightImg">
				    <img class="fakeImg"></img>
				    <img src="/funeral/js/images/5.png" class="realImg"></img>
				</div>
				<div class="rightImg">
				    <img class="fakeImg"></img>
				    <img src="/funeral/js/images/2.png" class="realImg"></img>
				</div>
				<div class="rightImg">
				    <img class="fakeImg"></img>
				    <img src="/funeral/js/images/1.png" class="realImg"></img>
				</div>
			</div>
		</div>
		<div id="shopTable" >
			<div id="tableHeader">
				<div class="checkBox" >
					<input type="checkbox" id="topCheckBox"  ng-click="selectAll()" onClick="checkBoxClick();">
				</div>
				<div class="itemName">
				    <p class="title">¬≤ÔøΩ¬∑ÔøΩ>
				</div>
				<div class="itemPrice">
				    <p class="title">≈Æ≈Æ¬º€∏ÔøΩ)</p>
				</div>
				<div class="itemAmout">
				    <p class="title">ÀΩ</p>
				</div>
				<div class="totalPrice">
				    <p class="title">–°¬ºƒ®‘™)</p>
				</div>
				<div class="operation">
				    <p class="title">¬≤⁄óÔøΩ>
				</div>
			</div>
			<div id="noAnyProduct" hidden>
	            <h1>≈∫¬µƒπ¬∫œØ¬≥¬µo¬ª¬π√ª‘ê…é¬∫œéêÜ∑</h1>
				<div id="goShoppingButton"><h2>»•¬±∂Ñµÿ∑¬Ω¬ø¬¥¬ø¬¥</h2></div>
	        </div>
			<div class="tableContent"  id={{wishListDetail.wishDetailId+'_'}} ng-repeat="wishListDetail in wishListDetails">
				<div class="checkBox">
				    <input type="checkbox" onClick="checkSubClick();"  name="checkbox"  id="{{wishListDetail.wishDetailId}}"  ng-click="changeOneItem(wishListDetail.wishDetailId,wishListDetail.wishlistId)">
				</div>
				<div class="itemName">
				    <div class="itemImg">
					    <img src="/funeral/js/images/{{wishListDetail.imageUrl}}"></img>
					</div>
					<div class="itemDesc inputContent">
					    <p class="title">{{wishListDetail.wishName}}</p>
						<p class="subTitle">{{wishListDetail.wishDesc}}</p>
					</div>
				</div>
				<div class="itemPrice inputContent">
				    <p class="title">{{wishListDetail.price}}</p>
				</div>
				<div class="itemAmout inputContent">
				    <div class="oneThird">
					    <div class="changeButton minusBitton" ng-click="subtraction(wishListDetail.wishDetailId)" >
						    <span>-</span>
						</div>
					</div>
					<div class="oneThird">
				        <p class="title titleNumber">{{wishListDetail.amount}}</p>
					</div>
					<div class="oneThird">
					    <div class="changeButton"  ng-click="add(wishListDetail.wishDetailId)">
						    <span>+</span>
						</div>
					</div>
				</div>
				<div class="totalPrice inputContent">
				    <p class="title titleNumber">{{wishListDetail.selectedPrice}}</p>

				</div>
				<div class="operation inputContent">
				    <span class="glyphicon glyphicon-trash deleteButton  "   ng-click="delete(wishListDetail.wishDetailId)" ></span>
				</div>
			</div>
		</div>
		<div id="shopSumm">
			<div id="rightSumm">
			    <div id="rigthTop">
				    <div id="rigthTopTitle">
					    <p class="title titleNumber"></p>
					
					</div>
					<div id="rigthTopContent">
					    <p class="title">¬π¬≤{{shappingCart.count}}¬ºÔøΩ¬¨¬π¬≤¬º∆£¬§¬£¬∫{{shappingCart.grossFee}}</p>
					
					</div>
				</div>
			</div>
			<div id="leftSumm">
			    <div class="continue">
			    <button>¬ºÕêÔøΩ</button>
				</div>
				<div class="next">
				<button id="nextButton">»•¬Ω‚å£</button>
				</div>
			</div>
		</div>
	</div>
</div>
<IFRAME NAME="content_frame" width=100% height=246 marginwidth=0 marginheight=0 SRC="/funeral/pages/component/bottomBar.html" frameborder = 0></IFRAME>
</div>
<div class="coverDiv" hidden>
<div class="titleDiv">
<h1>œØ∆∑–™œ∏—Öœ¢</h1>
</div>
<IFRAME class="detailFrame" width=1165px marginwidth=0 marginheight=0 SRC="#" frameborder = 0></IFRAME>
<div class="closeCoverDiv"><span class="glyphicon glyphicon-remove"></span></div>
</div>
<div class="coverImageDiv" hidden>
<div class="closeCoverDiv"><span class="glyphicon glyphicon-remove"></span></div>
</div>
</body>
<script>
function checkSubClick(){
	var vcheckbox=document.getElementsByName("checkbox");
	var topCheckBox=document.getElementById("topCheckBox");
	for(var i=0;i<vcheckbox.length;i++)
	{
		if(vcheckbox[i].checked){
			topCheckBox.checked = true;
	    }
		else{
	        topCheckBox.checked = false;
	        allSelect=0;	
	        return;			
		}
	}
}
function checkBoxClick(){
	var vcheckbox=document.getElementsByName("checkbox");
	var topCheckBox=document.getElementById("topCheckBox");
		
	for(var i=0;i<vcheckbox.length;i++)
	{
		if(topCheckBox.checked){
	        vcheckbox[i].checked = true;		
	    }
		else{
	        vcheckbox[i].checked = false;				
	    }
	}
}
window.onload=function(){

	$("#nextButton").click(function() {
		muskCurrentPage();
		$.ajax({
		    url: '/funeral/wishlist/generateOrderByCart',
			type: 'POST',
			contentType: "application/json; charset=UTF-8",
			dataType:'json',
			data: [],
			success:function(data){
				window.location.href='paymentInfo.html?orderId='+data.orderId;
				unmusk();
		    },
			error: function(error) {
				//$("#messageSent")[0].value = '';
			}
		});
	});
};
$(".continue").click(function() {
	    window.location.href='/funeral/pages/productAndService.html';
	});
$("#goShoppingButton").click(function() {
	window.location.href='/funeral/pages/productAndService.html';
});
</script>
</html>