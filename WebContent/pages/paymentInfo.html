<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="head"><title>
    æ”¯ä»˜ä¿¡æ¯
</title><meta name="description" content="Bleum provides high performance software development teams that
								deliver smart solutions, helping you to exceed your customersá¾?
								expectations for timely product delivery, zero defects, and a
								superior customer experience." /> 
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
<meta http-equiv="pragma" content="no-cache" /> 
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-script-type" content="text/javascript" /> 
</head>
<script src="../js/jquery-2.1.4.js"></script>
<script src="../js/jquery-ui.js"></script>
<script src="../js/sliderx.js"></script>
<script src="../js/angular-1.4.0-rc.2/angular.js"></script>
<link href="../js/bootstrap-3.3.6-dist/css/bootstrap.css" rel="stylesheet">
<script src="../js/bootstrap-3.3.6-dist/js/bootstrap.js"></script>
<script src="/funeral/js/generalUsage.js"></script>
<style>
@media (min-width: 900px) {
  .container {
    width: 100%;
	padding: 0px;
	min-width: 1000px;
	background-color: #F7F7F7;
  }
}
p {
    margin: 0px;
}
span {
    font-family: "Microsoft Yahei";
}
#paymentContain {
    width: 81%;
	overflow: auto;
	box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.2);
	background: #ffffff;
	margin: 0px auto;
	margin-top: 35px;
}
#infoContain {
	overflow: auto;
	width: 908px;
	margin: 0px auto;
	padding-top: 54px;
	padding-bottom: 46px;
}
#footerContain {
    background: #efefef;
	overflow: auto;
}
#footer {
    overflow: auto;
	width: 908px;
	margin: 0px auto;
	padding-top: 28px;
	padding-bottom: 28px;
}
#nextButton {
    width: 190px;
	height: 56px;
	border-radius: 28px;
	background: #f62f5e;
	text-align: center;
	float: right;
	cursor: pointer;
}
#nextButton p {
    font-size: 20px;
    line-height: 56px;;
    color: #ffffff;
}
#paymentStatus {
    overflow: auto;
}
.statusPointer {
    width: 20px;
	height: 20px;
	border-radius: 10px;
	background-color: #eeeeee;
	float: left;
}
.statusBar {
    width: 270px;
	height: 7px;
	background: #eeeeee;
	margin-left: 3px;
	margin-right: 3px;
	float: left;
	margin-top: 6px;
}
#paymentStatusDesc {
    width: 100%;
	margin-top: 27px;
	overflow: auto;
	padding-bottom: 28px;
}
.descDiv {
    overflow: auto;
	float: left;
}
.first {
    margin-right: 250px;
}
.second {
    margin-right: 260px;
}
.last {
    float: right!important;
}
.descDiv p {
    font-size: 19px;
    line-height: 1.5;
    color: #2e2e2e;
	font-weight: bold;
}
#paymentStatusDesc .selected {
    color: #f62f5e;
}
#paymentStatus .selected {
	background: #f62f5e;
}
.fieldLine {
    width: 100%;
	overflow: auto;
	padding-bottom: 31px;
	border-bottom: 3px solid #e5e5e5;
}
.fieldInd {
    overflow: auto;
	float: left;
	margin-right: 25px;
	margin-top: 15px;
}
.longField {
    width: 440px;
}
.shortField {
    width: 208px;
}
.normalField {
    width: 242px;
}
.shorterField {
    width: 170px;
}
.lastField {
    margin-right: 0px!important;
}
.normalField {
    width: 242px;
	overflow: auto;
	float: left;
}
.fieldDesc {
    width: 100%;
	height: 44px;
}
.fieldDesc p {
    font-size: 19px;
    line-height: 44px;
    color: #b4b4b4;
	font-weight: bold;
}
.fieldContent {
    width: 100%;
	height: 56px;
	
	
}
.fieldContent input {
    height: 56px;
	width: 100%;
	font-size: 25px;
	font-family: "Microsoft Yahei";
}
.fieldContent select {
    height: 56px;
	width: 100%;
	font-size: 15px;
	font-family: "Microsoft Yahei";
}
.subTitle {
    font-size: 13px;
    line-height: 22px;
    color: #b4b4b4;
}
.shippingMethod {
    width: 100%;
	overflow: auto;
	padding-bottom: 10px;
}
.shippingMethod h1 {
    font-size: 28px;
    line-height: 60px;
    letter-spacing: 1.4px;
    color: #2e2e2e;
	margin: 0px;
	padding-top: 10px;
}
.shippingMethod p {
    font-size: 19px;
    line-height: 1.5;
    color: #b4b4b4;
	margin-bottom: 7px;
}
.radioDesc {
    font-size: 19px;
    line-height: 1.5;
    color: #2e2e2e;
	font-weight: bold;
	margin-left: 3px;
	margin-right: 3px;
}
.normalDesc {
    font-size: 26px;
    line-height: 0.8;
    color: #2e2e2e;
	margin-right: 42px;
}


#saveButton {
  width: 190px;
	height: 56px;
	border-radius: 28px;
	background: #f62f5e;
	text-align: center;
	float: right;
	cursor: pointer;
}
#saveButton p {
    font-size: 20px;
    line-height: 56px;;
    color: #ffffff;
}
#prevButton {
    width: 190px;
	height: 56px;
	border-radius: 28px;
	background: #ffffff;
	text-align: center;
	float: left;
	cursor: pointer;
}
#prevButton p {
    font-size: 20px;
    line-height: 56px;;
    color: #f62f5e;
}

</style>
<script type="text/javascript">





</script>
<body ng-app="contactInfo" ng-controller="contactInfoController">
<div class="container">
<div class="topBarDiv">
<IFRAME NAME="content_frame" width=100% SRC="/funeral/pages/component/topBar.html?cat=product" frameborder = 0 height = "65px"></IFRAME>
</div>
<div id="paymentContain">
    <div id="infoContain">
	    <div id="paymentStatus">
		     <div class="statusPointer selected">
			 </div>
			 <div class="statusBar">
			 </div>
			 <div class="statusPointer">
			 </div>
			 <div class="statusBar">
			 </div>
			 <div class="statusPointer">
			 </div>
			 <div class="statusBar">
			 </div>
			 <div class="statusPointer">
			 </div>
		</div>
		<div id="paymentStatusDesc">
		     <div class="descDiv first">
			     <p class="selected">é‚®å¯„</p>
			 </div>
			 <div class="descDiv second">
			     <p>ç¡®è®¤</p>
			 </div>
			 <div class="descDiv">
			     <p>æ”¯ä»˜</p>
			 </div>
			 <div class="descDiv last">
			     <p>æ ¸å¯¹</p>
			 </div>
		</div>
		<div class= "fieldLine">	</div>
		  
		  
		    <div class="shortField fieldInd">
			    <div class="fieldDesc">
				    <p>å§“å<font size="3" color="red">*</font></p>
				</div>
				<div class="fieldContent">
				    <input id="contactName"    style=" font-size: 19px;line-height: 44px;font-weight: bold;"     type="text" class="form-control"  ng-model="currentContacter.contactName"></input>
				    <input type="hidden"  ng-model="currentContacter.userId"  vaule={{$scope.user.userId}}></input>

				</div>
			</div>
		
			
			
	
				<div class="longField fieldInd lastField">
			    <div class="fieldDesc">
				    <p>ä»è”ç³»äººä¸­é€‰æ‹©*</p>
				</div>
				<div class="fieldContent">
				    <select class="form-control"   id="contacterSelect"  style=" font-size: 19px;line-height: 44px;font-weight: bold;" >
				    	<option>è¯·é€‰æ‹©</option>
						<option ng-repeat="contacter in contactInfos "  value={{contacter.contactId}}><p style="font-size:10px;">{{contacter.contactName+':'+contacter.city+':'+contacter.phone}}</p></option>
					
					</select>
				</div>
			</div>
			
			
			
			<div class="normalField fieldInd">
			    <div class="fieldDesc">
				    <p>æ‰‹æœºå·ç <font size="3" color="red">*</font></p>
				</div>
				<div class="fieldContent">
				    <input id="contactPhone" style=" font-size: 19px;line-height: 44px;font-weight: bold;"   onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')" type="text" class="form-control"  ng-model="currentContacter.phone"  ></input>
				</div>
				<p class="subTitle">æˆ‘ä»¬ä¼šç¡®ä¿ä½ çš„éšç§ï¼Œè°¨æ…ä½¿ç”¨æ‚¨çš„æ‰‹æœºå·ç </p>	
			</div>
			
			
			
			<div class="normalField fieldInd">
			    <div class="fieldDesc">
				    <p>çœä»½<font size="3" color="red">*</font></p>
				</div>
				<div class="fieldContent">
				  <select class="form-control"  style=" font-size: 19px;line-height: 44px;font-weight: bold;"  id="provinceSelect"  ng-model="currentContacter.province" value={{currentContacter.province}}>
							<option>è¯·é€‰æ‹©</option>
						<option value='1'  ><p  class="form-control">æ±Ÿè‹çœ?/p></option>
					  <option value='2'  ><p  class="form-control">ä¸Šæµ·å¸?/p></option>
					  <option value='3'  ><p  class="form-control">æµ™æ±Ÿçœ?/p></option>

					</select>   
				    
				</div>
				<p class="subTitle">æˆ‘ä»¬ä¼šç¡®ä¿ä½ çš„éšç§ï¼Œè°¨æ…ä½¿ç”¨æ‚¨çš„è”ç³»ä¿¡æ¯</p>	
				
			</div>
			
			
			
					<div class="shorterField fieldInd">
			    <div class="fieldDesc">
				    <p>åŸå¸‚<font size="3" color="red">*</font></p>
				</div>
				<div class="fieldContent">
				    <input id="city" type="text" style=" font-size: 19px;line-height: 44px;font-weight: bold;"  class="form-control"  ng-model="currentContacter.city"></input>
				</div>
			</div>
			
			
			<div class="longField fieldInd">
			    <div class="fieldDesc">
				    <p>è¯¦ç»†åœ°å€<font size="3" color="red">*</font></p>
				</div>
				<div class="fieldContent">
				    <input  id="address" type="text"  style=" font-size: 19px;line-height: 44px;font-weight: bold;" class="form-control" ng-model="currentContacter.detailAddress"></input>
				</div>
		
			</div>
			
			
			
			
			
		
				
				
			<div class="normalField fieldInd" >
			    <div class="fieldDesc">
				    
				</div>
				<div class="fieldContent">
				   
				</div>	
					</div>
		
		
			<div class="shorterField fieldInd">
			    <div class="fieldDesc">
				    <p>å¤‡ç”¨è”ç³»äººå§“å?font size="3" color="red">*</font></p>
				</div>
				<div class="fieldContent">
				    <input  id="backupName" style=" font-size: 19px;line-height: 44px;font-weight: bold;"  type="text" class="form-control" ng-model="currentContacter.backupName"></input>
				</div>	
				<p class="subTitle">å¦‚æœä¸»è¦è”ç³»äººå·²å»ä¸–æˆ–è€…ä¸æ–¹ä¾¿è”ç³»</p>
					</div>
		
					
				<div class="normalField fieldInd">
			    <div class="fieldDesc">
				    <p>å¤‡ç”¨è”ç³»äººç”µè¯?font size="3" color="red">*</font></p>
				</div>
				<div class="fieldContent">
				    <input id="backupPhone" style=" font-size: 19px;line-height: 44px;font-weight: bold;"   onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"  type="text" class="form-control" ng-model="currentContacter.backupPhone"></input>
				</div>	
					</div>
					
					
					<div class="shorterField fieldInd lastField">
			    <div class="fieldDesc">
				    <p>&nbsp;</p>
				</div>
			
			</div>
			
		</div>
		<div class="shippingMethod">
		    <h1>é‚®å¯„æ–¹å¼</h1>
		</div>
		<div class="shippingMethod">
		    <p>æ¨èæ–¹å¼</p>
			<input type="radio" name="deliveryMethod"  id="deliveryMethod1"  value="1" checked>
			<span class="radioDesc">æš‚å­˜åœ¨å¿µå¿?/span>
			<span class="normalDesc">ï¼ˆæˆ‘ä»¬ä¼šæš‚æ—¶æ›¿æ‚¨ä¿ç®¡ï¼Œåœ¨éœ€è¦çš„æ—¶å€™æä¾›ç»™æ€¿ï¼‰</span>
	    </div>
		<div class="shippingMethod">
		    <p>ä¼ ç»Ÿæ–¹å¼</p>
			<input type="radio" name="deliveryMethod"  id="deliveryMethod2" value="2">
			<span class="radioDesc">æ ‡å‡†</span>
			<span class="normalDesc">ï¼ˆå…è´? 2-3æ—¥é€è¾¾ï¼?/span>
			<input type="radio" name="deliveryMethod"  id="deliveryMethod3" value="3">
			<span class="radioDesc">å¿«é€?/span>
			<span class="normalDesc">ï¼?æ—¥é€è¾¾ï¼?0å—é’±å¿«é€’è´¹ç”¨ï¼‰</span>
	    </div>
	</div>
	<div id="footerContain">
	    <div id="footer">
	    	
	    	 <div id="prevButton">
			    <p>ä¸Šä¸€æ­?/p>
			</div>
		    <div id="nextButton">
			    <p>ä¸‹ä¸€æ­?/p>
			</div>
		</div>
	</div>
</div>
<IFRAME NAME="content_frame" width=100% height=246 marginwidth=0 marginheight=0 SRC="/funeral/pages/component/bottomBar.html" frameborder = 0></IFRAME>
</div>
<div class="coverDiv" hidden>
<div class="titleDiv">
<h1>ç‰©å“è¯¦ç»†ä¿¡æ¯</h1>
</div>
<IFRAME class="detailFrame" width=1165px marginwidth=0 marginheight=0 SRC="#" frameborder = 0></IFRAME>
<div class="closeCoverDiv"><span class="glyphicon glyphicon-remove"></span></div>
</div>
</body>
<script>
var deliverMethod;	
	
var app = angular.module('contactInfo', []);

app.controller('contactInfoController', function($scope, $http) {
$scope.user;
$scope.currentContacter;
$scope.currenctExpress;
$scope.contactorId;
  $http.get("/funeral/login/getCurrentUser").success(function(response) {
	    $scope.user = response;
	    	    var data = JSON.stringify($scope.user);
	    	     $http.get("/funeral/contactInfo/getUsingContacter").success(function(response) {
	    $scope.currentContacter = response;
	    });
	   $http.get("/funeral/expressController/getUsingExpressInfoByUserId").success(function(response) {
	    $scope.currenctExpress = response;
	    	    var datadata = JSON.stringify($scope.currenctExpress);
	    //	 alert("----currenctExpress---"+datadata+"  deliveryMethod= "+datadata.deliveryMethod);
	    
		deliverMethod=$scope.currenctExpress.deliveryMethod;	
		
	//	alert(" deliverMethod= "+deliverMethod);
		
	//	alert(" --1--  deliverMethod ="+deliverMethod+"    ===  deliveryMethod="+$scope.currenctExpress.deliveryMethod);
			if(deliverMethod=='1'){
	    		
	    		$("#deliveryMethod1").attr("checked",'checked'); 
	    		
	    		}else if(deliverMethod=='2'){
	    		$("#deliveryMethod2").attr("checked",'checked'); 

	    			}else if(deliverMethod=='3'){
	    				
	   $("#deliveryMethod3").attr("checked",'checked'); 
	
	    				}else{
	  $("#deliveryMethod1").attr("checked",'checked'); 

	    					}
		
			//	alert(" --2--  deliverMethod ="+deliverMethod);

		
		
		});
	    
	});
	
    $http.get("/funeral/contactInfo/listByUserId").success(function(response) {
	    $scope.contactInfos = response;
	    
	});

$(document).ready(function(){ 
$('#contacterSelect').change(function(){ 
	
	//alert(" -- value "+$(this).val());
if($(this).val()=="è¯·é€‰æ‹©"){
	
	//alert("---1--");
	  $http.get("/funeral/contactInfo/listByContacterId?contactId=0").success(function(response) {
	    $scope.currentContacter = response; 
	});
	}else{
		//alert("---2--");

    $http.get("/funeral/contactInfo/listByContacterId?contactId="+$(this).val()).success(function(response) {
	    $scope.currentContacter = response; 
	    
	      var datadata = JSON.stringify($scope.currentContacter);
	  //  alert("----currentContacter---"+datadata);
	});
}
}) 
}) 

function validatemobile(vid)
    {
    	
 var mobile=document.getElementById(vid);
    	
        if(mobile.value.length==0)
        {
           alert('è¯·è¾“å…¥æ‰‹æœºå·ç ï¼');
           mobile.focus();
           return false ;
        }    
        if(mobile.value.length!=11)
        {
            alert('è¯·è¾“å…?1ä½æœ‰æ•ˆçš„æ‰‹æœºå·ç ï¼?);
            mobile.focus();
            return false;
        }
       return true;       
    }


$("#nextButton").click(function () {
	

if( $scope.currentContacter.contactName==null||$scope.currentContacter.contactName==""){
	alert("è¯·è¾“å…¥è”ç³»äººå§“åï¼?);
	var contactName = document.getElementById("contactName");
  contactName.focus();
	return;
	}


if( $scope.currentContacter.phone==null||$scope.currentContacter.phone==""){
	alert("è¯·è¾“å…¥è”ç³»äººç”µè¯ï¼?);
	var contactPhone = document.getElementById("contactPhone");
  contactPhone.focus();
	return;
	}else{
	 if(!validatemobile('contactPhone')){
	 	var contactPhone = document.getElementById("contactPhone");
  contactPhone.focus();
	 	return;
	 	}
	 		var cPhone = document.getElementById("contactPhone");
			var bPhone = document.getElementById("backupPhone");

		if(cPhone.value==bPhone.value){
			alert("è”ç³»äººç”µè¯å’Œå¤‡ç”¨è”ç³»äººç”µè¯ä¸èƒ½ç›¸åŒï¼");
		contactPhone.focus();
	 	return;
			}
		
		
	}
		
	if( $scope.currentContacter.province==null||$scope.currentContacter.province==""||$scope.currentContacter.province=="è¯·é€‰æ‹©"){
	alert("è¯·é€‰æ‹©çœä»½ï¼?);
	var provinceSelect = document.getElementById("provinceSelect");
  provinceSelect.focus();
	return;
	}
	
	if( $scope.currentContacter.city==null||$scope.currentContacter.city==""){
	alert("è¯·è¾“å…¥åŸå¸‚ï¼");
	var city = document.getElementById("city");
  city.focus();
	return;
	}

if( $scope.currentContacter.detailAddress==null||$scope.currentContacter.detailAddress==""){
	alert("è¯·è¾“å…¥è¯¦ç»†åœ°å€ï¼?);
	var address = document.getElementById("address");
  address.focus();
	return;
	}else{
		var address = document.getElementById("address");
		
		if(address.value.length<10){
				alert("è¯¦ç»†åœ°å€è‡³å°‘10ä¸ªå­—ï¼?);

			
  address.focus();
	return;
	}
		}

if( $scope.currentContacter.backupName==null||$scope.currentContacter.backupName==""){
	alert("è¯·è¾“å…¥å¤‡ç”¨è”ç³»äººå§“åï¼?);
	var backupName = document.getElementById("backupName");
  backupName.focus();
	return;
	}

if( $scope.currentContacter.backupPhone==null||$scope.currentContacter.backupPhone==""){
	alert("è¯·è¾“å…¥å¤‡ç”¨è”ç³»äººç”µè¯ï¼?);
	var backupPhone = document.getElementById("backupPhone");
  backupPhone.focus();
	return;
	}else{
		
	if(!validatemobile("backupPhone")){
		
			var backupPhone = document.getElementById("backupPhone");
  backupPhone.focus();
	 	return;
		
		}
		
			var cPhone = document.getElementById("contactPhone");
			var bPhone = document.getElementById("backupPhone");

		if(cPhone.value==bPhone.value){
			alert("å¤‡ç”¨è”ç³»äººç”µè¯å’Œè”ç³»äººç”µè¯ä¸èƒ½ç›¸åŒï¼");
			 backupPhone.focus();
	 	return;
			}
		
		
		
		}

	    $scope.currentContacter.userId=$scope.user.usrId;
	    
	    $scope.currentContacter.expressMethod=deliverMethod;
		
	    var datadata = JSON.stringify($scope.currentContacter);
	    //	alert("----datadata---"+datadata);

		    $http({
            method: "POST",
            url:"/funeral/contactInfo/add",
            data: datadata,
			headers: {
                'Content-Type': 'application/json'
            },
			dataType:"json"
        }).success(function(){
        
  
          });
 
 window.location.href='/funeral/pages/paymentConfirm.html'; 
         });

$("#deliveryMethod1").click(function () {
	
	deliverMethod="1";
	});

$("#deliveryMethod2").click(function () {
	
	deliverMethod="2";
});
$("#deliveryMethod3").click(function () {
	
	deliverMethod="3";
	
	
	});

});






	
	
	
window.onload=function(){

	  $("#prevButton").click(function () {
	    window.location.href='/funeral/pages/wishList.html';
	});
};
</script>
</html>