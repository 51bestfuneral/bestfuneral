<!DOCTYPE html>
<html>
<head>
<title>添加产品</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
</head>
<body ng-app="myApp" ng-controller="wishConfigController">
<header>
<ul id="nav">
	<li><a href="updateProduct.html">修改愿望</a></li>
</ul>
</header>



<div id="addSection">
	
	
	

<contentSection>
	
	
	
	<table border="0"  width="100%"> 
		
	
	
		
	
					
					
						<tr> 
						
			<td>
			
			<label >产品状态&nbsp;</label>
	<select   ng-model="wish.statusId"  value={{wish.statusId}}>
  <option value="1">生效</option>
  <option value="2">未生效</option>
  <option value="3">已刪除</option>
  <option value="4">已過期</option>
  </select>			
		
			</td>
				
						<td>	<button id="saveButton" class="nextButton">保存</button>  </td>
			<td><button id="deleteButton" class="nextButton" ng-click="removeWish()">删除</button> </td>
		
		<tr>
			<td>
	
			 <div id="imgSection">
 	
 	  <form name="form" action={{'/funeral/uploadWishImg/upload?id='+wish.wishId}} method="POST" enctype="multipart/form-data">  

        <table class="tableForm">  
            <thead>  
                <tr>  
                    <th>上传简介图片（图片名称只能是数字或者字母或下划线）</th>  
                </tr>  
            </thead>  
            <tbody>  
                <tr>  
                    <td><input id="fileToUpload"  type="file" size="45"   
                        name="fileToUpload"  class="input"></td>  
                </tr>  
            </tbody>  
            <tfoot>  
                <tr>  
                    <td><button class="button" id="uploadDescriptionImg"  
                            onclick="return uploadUnitImage();"   >上传</button></td>  
                </tr>  
            </tfoot>  
        </table>  
       
       
      
         </form>  
     </div> 

			</td>
		<td><img  height="200" width="200"  title="預覽圖"  src={{wish.imgUrl}}></td>
			
		</tr>
					
	
	
</table>
		
<tr>

 <div id="imgSection">
 	
 	  <form name="form" action='/funeral/productConfiguration/upload' method="POST" enctype="multipart/form-data">  

        <table class="tableForm">  
            <thead>  
                <tr>  
                    <th>通過導入excel來上傳產品（名称只能是数字或者字母或下划线）</th>  
                </tr>  
            </thead>  
            <tbody>  
                <tr>  
                    <td><input id="fileToUpload"  type="file" size="45"   
                        name="fileToUpload"  class="input"></td>  
                </tr>  
            </tbody>  
            <tfoot>  
                <tr>  
                    <td><button class="button" id="uploadDescriptionImg"  
                            onclick="return uploadUnitImage();"   >上传</button></td>  
                </tr>  
            </tfoot>  
        </table>  
       
       
      
         </form>  
     </div> 

	</tr>
	
	
	
	
</contentSection>
	
	
</div>



<div id="questionList">
	
	<table border="0"  width="100%"> 
		
		<tr><td>愿望名称</td><td>总类编号</td><td>总类</td><td>分类编号</td><td>型号</td><td>供应商</td><td>成本</td><td>销售价</td></tr>
		
	<tr ng-repeat="x in wishs">
		
				<td>         <input type="radio" name="savedWishs" value={{x.wishId}}   ng-click="changeWish(x.wishId)"/>     <label >    {{x.wishName}} </label></td>		
	
		
		
			<td>      {{x.generalCode}}</td>		<td>      {{x.generalCate}}</td>		<td>      {{x.subCateCode}}</td>	<td>      {{x.model}}</td><td>      {{x.supplier}}</td>

<td>{{x.costPrice}}</td>	<td>{{x.sellingPrice}}</td>	
			
			</tr>
		
		
	</table>
	
	
	
	</div>




	<style>
	#imgSection{
  height:100%;
	width:100%;
	border:0px solid black;
  background-color:  #f2f2f2;
  position:relative; left:0%; right:0%;	
	}	
		
	#addSection{
	height:480px;
	width:100%;
	border:0px
  background-color: rgba(162, 162, 162, 0.5);
  position:relative; left:0%; right:0%;
	}



#addSection contentSection{	
	
float:left;width:100%; height:480px;border:0px ;background:rgba(162, 162, 162, 0.5);
	}
	
	
	
	#questionList{
	width:100%;
	border:0px
  background-color: rgba(162, 162, 162, 0.5);
  position:relative; left:0%; right:0% ; top:50;
	}

#questionList _table{
	
	
	 background-color: #d6d6d6;
	
	
	
	
	}

	

	

		
	ul#nav{ width:100%; height:60px; background:#ffffff; position:relative; left:0%; right:0%; text-align:center;} 
  ul#nav li{display:inline; height:60px} 
  ul#nav li a{display:inline-block; padding:0 20px; height:60px; line-height:60px;text-decoration:none;
  color:#000000; face: "STHeitiSC-Medium"; font-size:23px;} 
  ul#nav li a:hover{background:#ebebeb}/*ʨ׃˳±껬¹�£ʱ±仯µı³¾°ҕɫ*/ 
  ul#nav index{display:inline; height:60px;text-align:left;float:left;} 
ul#summary{ width:100%; height:353px; background:#ff7893; position:relative; left:0%; right:0%; text-align:center; top:30px;} 
ul#summary  comments{  color:#ffffff; face: "STHeitiSC-Medium"; font-size:60px;} 
ul#summary  money{ color:#ffffff; face: "STHeitiSC-Medium"; font-size:48px;font-weight:bold;} 
ul#summary  note{  color:#ffffff; face: "STHeitiSC-Medium"; font-size:20px;} 
.nextButton{
	  background-color: rgba(0, 0, 0, 0.58);
		width : 150px;
		height: 30.9px;
		text-align:center;
	  font-size: 23px;
	  border-radius:10px 5px 5px 5px;
   } 
		
	</style>
	
	<script type="text/javascript" src="/funeral/pages/html/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/funeral/pages/html/js/nav2.js"></script>
<script src="/funeral/js/angular-1.4.0-rc.2/angular.js"></script>
	
	
	
	<script>
	var app = angular.module('myApp', []);
 
	 app.controller('wishConfigController', function($scope, $http) {
	
	
		$http.get("/funeral/wishConfig/list").success(function(response) {
	       $scope.wishs = response;
			})
	
	 	$scope.changeWish = function(vid){
		 		
		 	
		 		$scope.wishId=vid;
		 		
    
				$http.get("/funeral/wishConfig/listById?id="+vid).success(function(response) {
	       $scope.wish = response;
	       	    var data = JSON.stringify($scope.wish);
	       
	       
			})

  	} 
  	
  	
  		$scope.removeWish	=function(){
  				
  			
  					$http.get("/funeral/wishConfig/removeWishById?id="+$scope.wishId).success(function(response) {
	       $scope.wish = response;
	       
	         
	       	$http.get("/funeral/wishConfig/list").success(function(response) {
	       $scope.wishs = response;
			})
			})
  			
  			}
	 	
	 	$("#saveButton").click(function() {
	    var datadata = JSON.stringify($scope.wish);
	    
	    $http({
            method: "POST",
            url:"/funeral/wishConfig/saveWish",
            data: $scope.wish,
			headers: {
                'Content-Type': 'application/json'
            },
			dataType:"json"
        }).success(function(){
          window.location.reload("addProduct.html");  
        });
	});	
	 	
	
function uploadUnitImage()  {  
	
        showLoading("正在上传，请等待...");  
        $.ajaxFileUpload  
        (  
            {  
                url:'/funeral/uploadFile/upload?action=uploadImage',//用于文件上传的服务器端请求地址
                secureuri:false,//一般设置为false  
                fileElementId: 'unitImageToUpload', //文件上传空间的id属性  
                dataType: 'json',//返回值类型 一般设置为json  
                success: function (data, status)  //服务器成功响应处理函数  
                {  
                	 alert("data =1");
                },  
                error: function (data, status, e)//服务器响应失败处理函数  
                {  
                	 alert("data =2");
                }              }  
        )  
}  	
	 	
	
		
});
	</script>

</ul>
</body>
</html>