<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<title>念念--墓地列表</title>
<link href="/js/images/niannian.ico" rel="shortcut icon" />
<meta name="description" content="念念网致力于打造智能葬礼产品和服务定制工具。念念主张“不要让你爱的人走的太匆忙”，鼓励充分尊重逝者意愿的提前定制，已实现“殡葬服务价格透明化、互联网化、个性化”为己任 。念念，也是中国最大的日系骨灰盒骨灰坛销售公司，最有特色的祭扫祭祀用品服务商。" /> 
<meta name="keywords" content="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务,上海墓地， 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务，私人定制，生前契约，葬礼保险,提前定制" /> 
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
<meta http-equiv="pragma" content="no-cache" /> 
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-script-type" content="text/javascript" /> 
</head>
<script src="../js/jquery-2.1.4.js"></script>
<script src="../js/jquery-ui.js"></script>
<script src="../js/sliderx.js"></script>
<script src="../js/angular-1.4.0-rc.2/angular.js"></script>
<link href="../js/bootstrap-3.3.6-dist/css/bootstrap.css" rel="stylesheet">
<script src="../js/bootstrap-3.3.6-dist/js/bootstrap.js"></script>
<link href="/js/personal.css" rel="stylesheet">
<script src="/js/generalUsage.js"></script>
<script src="../js/timepicker/js/moment-with-locales.js"></script>
<script src="../js/timepicker/js/bootstrap-datetimepicker.js"></script>
<link href="/css/cemeteryList.css" rel="stylesheet">
<body ng-app="myApp" ng-controller="cemetery">
<div class="topBarDiv">
<IFRAME NAME="content_frame" width=100% SRC="component/topBar.html?cat=cemetery" frameborder = 0 height = "67px"></IFRAME>
</div>
<div class="container" ng-cloak>
<div id="mainHeader">
    <div id="headerText">
        <h1>我们和上海多家墓园和寺庙建立了合作，为您提供方便</h1>
	</div>
	<div id="navigateVisit">
		<input type="text" placeholder="选择墓地/寺庙" id="inputArea">
		</input>
		<div class='input-group date' id='datetimepicker1'>
			<input type='text' class="form-control mandantory" placeholder="选择预约时间" ng-model="user.birthday" id="requestDate"/>
            <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
            </span>
		</div>
		<button id="visitButton">
			<p>在线预约</p>
		</button>
        <div id="searchBlurDiv" hidden>
            <div class="stateBar" ng-repeat="result in resultMap">
                <div class="headerCol">
                    <span><b ng-bind="result.district"></b></span>
                </div>
                <div class="normalCol">
                    <div class="normalCell" ng-repeat="cemetery in result.list track by $index">
                        <span ng-bind="cemetery.cemeteryName"></span>
                    </div>
                </div>
            </div>
            <div class="subBar">
                <span>如果您不明确该选哪一个，点<a href="catagoryCemetery.html">这里</a>可以看到所有墓地/寺庙一览</span>
            </div>
        </div>
		<div id="typeBlurDiv" hidden>
            <div class="optionBar" ng-repeat = "search in searchList">
				<div class="optionIcon">
					<img src="../js/images/cemeteryList.png"/>
				</div>
				<div class="optionDesc">
                    <span class="descMain" ng-bind="search.cemeteryName"></span>
					<span class="descAdd" ng-bind="search.address"></span>
				</div>
			</div>
		</div>
	</div>
</div>
<hr id="cemeteryList">
	<div class="listContent">
		<h2>根据价格作出最适合的选择</h2>
	    <div  ng-click="gotoCemetery(bean.cemeteryId)" class="cemeteryDiv single">
		 <img  src="http://cdn.now.howstuffworks.com/media-content/TwuUAjsF-coins_chuckcross_eyeem_gettyimagesjpg-1210-680.jpg"  alt="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务,上海墓地， 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务，私人定制，生前契约，葬礼保险,提前定制"></img>
		  <div class="ceMuskDiv"></div>
		  <span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h1>经济实惠</h1></span>
            <span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h5>￥50000-￥60000</h5></span>
		</div>
		<div  ng-click="gotoCemetery(bean.cemeteryId)" class="cemeteryDiv single">
			<img  src="https://imgstore.storage.googleapis.com/uploads/user/wallpaper/4/ad5e869e58bb5aa74da89d3a75d07cc2.jpg"  alt="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务,上海墓地， 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务，私人定制，生前契约，葬礼保险,提前定制"></img>
			<div class="ceMuskDiv"></div>
			<span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h1>适中之选</h1></span>
            <span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h5>￥50000-￥60000</h5></span>
		</div>
		<div  ng-click="gotoCemetery(bean.cemeteryId)" class="cemeteryDiv single">
			<img  src="http://mybrokencoin.com/wp-content/uploads/2016/03/Gold-Coin.jpg"  alt="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务,上海墓地， 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务，私人定制，生前契约，葬礼保险,提前定制"></img>
			<div class="ceMuskDiv"></div>
			<span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h1>精致奢华</h1></span>
            <span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h5>￥50000-￥60000</h5></span>
		</div>
	</div>
    <hr></hr>
    <div id="viewAllButton">
        <span>查看所有墓地</span>
    </div>
	<div class="listContent">
		<h2>也有各种特色作为选择</h2>
		<div  ng-click="gotoCemetery(bean.cemeteryId)" class="cemeteryDiv double">
			<img  src="http://images.forwallpaper.com/files/thumbs/preview/33/332251__apple-blossom-art_p.jpg"  alt="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务,上海墓地， 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务，私人定制，生前契约，葬礼保险,提前定制"></img>
			<div class="ceMuskDiv"></div>
			<span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h1>花团锦簇</h1></span>
		</div>
		<div  ng-click="gotoCemetery(bean.cemeteryId)" class="cemeteryDiv single">
			<img  src="/js/images/1459260543037_581ac42efc3450f1ce152f6c1b8c4c58-001.jpg"  alt="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务,上海墓地， 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务，私人定制，生前契约，葬礼保险,提前定制"></img>
			<div class="ceMuskDiv"></div>
			<span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h1>玫瑰园</h1></span>
			<span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h5>杨浦区</h5></span>
		</div>
		<div  ng-click="gotoCemetery(bean.cemeteryId)" class="cemeteryDiv single">
			<img  src="http://img04.tooopen.com/images/20131119/sy_47915912127.jpg"  alt="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务,上海墓地， 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务，私人定制，生前契约，葬礼保险,提前定制"></img>
			<div class="ceMuskDiv"></div>
			<span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h1>佛光寺影</h1></span>
		</div>
		<div  ng-click="gotoCemetery(bean.cemeteryId)" class="cemeteryDiv single">
			<img  src="http://pic.58pic.com/58pic/15/14/48/58B58PICybh_1024.jpg"  alt="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务,上海墓地， 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务，私人定制，生前契约，葬礼保险,提前定制"></img>
			<div class="ceMuskDiv"></div>
			<span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h1>海边景致</h1></span>
		</div>
		<div  ng-click="gotoCemetery(bean.cemeteryId)" class="cemeteryDiv single">
			<img  src="http://img4.imgtn.bdimg.com/it/u=3900549520,2172561250&fm=21&gp=0.jpg"  alt="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务,上海墓地， 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务，私人定制，生前契约，葬礼保险,提前定制"></img>
			<div class="ceMuskDiv"></div>
			<span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h1>亭台楼阁</h1></span>
		</div>
		<div  ng-click="gotoCemetery(bean.cemeteryId)" class="cemeteryDiv single">
			<img  src="/js/images/1459264773581_14.jpg"  alt="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务,上海墓地， 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务，私人定制，生前契约，葬礼保险,提前定制"></img>
			<div class="ceMuskDiv"></div>
			<span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h1>翠竹园</h1></span>
			<span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h5>杨浦区</h5></span>
		</div>
		<div  ng-click="gotoCemetery(bean.cemeteryId)" class="cemeteryDiv double">
			<img  src="http://pic2.ooopic.com/12/84/23/95bOOOPIC6e.jpg"  alt="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务,上海墓地， 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务，私人定制，生前契约，葬礼保险,提前定制"></img>
			<div class="ceMuskDiv"></div>
			<span style="position: relative; top: -100; left: 0; background-color:#ffffff;"><h1>淡雅竹园</h1></span>
		</div>
	</div>
</div>
<IFRAME NAME="content_frame" width=100% height=246 marginwidth=0 marginheight=0 SRC="component/bottomBar.html" frameborder = 0></IFRAME>
</div>
</body>
<script type="text/javascript">
	var app = angular.module('myApp', []),
	    cemeteryListBean;
	app.directive('onFinishRenderFilters', function ($timeout) {
	    return {
	        restrict: 'A',
	        link: function(scope, element, attr) {
	            if (scope.$last === true) {
	                $timeout(function() {
	                    scope.$emit('ngRepeatFinished');
	                });
	            }
	        }
	    };
	});
	app.controller('cemetery', function($scope, $http) {
		muskCurrentPage();
        var searchList = [];
	 	$http.get("/cemetery/listByDistrict?valid=1").success(function(response) {
			var resultMap = [];
			for (var p in response) {
				var result = {};
				result.district = p.replace('上海市','');
				result.list = response[p];
				resultMap.push(result);
                for (var i=0;i < response[p].length;i++) {
                    searchList.push(response[p][i]);
                }
			}
			$scope.resultMap = resultMap;
            unmusk();
        });
        $("#inputArea").bind('input propertychange', function() {
            $scope.searchList = [];
            for (var i=0;i < searchList.length;i++) {
                if ($(this)[0].value !== "") {
                    var hasValue = false;
                    $("#searchBlurDiv").fadeOut();
                    if (searchList[i].cemeteryName.indexOf($(this)[0].value) >= 0
                            || searchList[i].address.indexOf($(this)[0].value) >= 0
							|| searchList[i].pinyin.indexOf($(this)[0].value) >= 0) {
                        $scope.searchList.push(searchList[i]);
                        hasValue = true;
                    }
                    if (hasValue) {
                        $scope.$apply();
                        $("#typeBlurDiv").fadeIn();
                    }
                }
                else {
                    $("#typeBlurDiv").fadeOut();
                    $("#searchBlurDiv").fadeIn();
                }
            }
        });
	 	$scope.gotoCemetery = function(id){
	 	    window.location.href='catagoryCemetery.html';
	 	}
	});
</script>
<script>
	$('#datetimepicker1').datetimepicker({
		format: "YYYY-MM-DD",
		locale: "zh-cn"
	});
	$("#visitButton").click(function() {
		popupRequestPage();
	});
    $("#inputArea").focus(function() {
        if ($("#inputArea")[0].value === '') {
            $("#searchBlurDiv").fadeIn();
        }
    });
    $("#typeBlurDiv").on("click", ".optionBar", function() {
        $("#inputArea")[0].value = $(this).find(".descMain")[0].innerText;
        $("#typeBlurDiv").fadeOut();
    });
    $("#searchBlurDiv").on("click", ".normalCell", function(e) {
        $("#inputArea")[0].value = $(this).find("span")[0].innerText;
        $("#searchBlurDiv").fadeOut();
        e.stopPropagation();
    });
    $(document).click(function(e){
        if (e.toElement.offsetParent !== $("#searchBlurDiv")[0]
            && e.toElement !== $("#inputArea")[0]) {
            $("#searchBlurDiv").fadeOut();
        }
    });
	$(".cemeteryDiv").hover(function() {
		$(this).find(".ceMuskDiv").css({
			opacity: 0.1
		});
	}, function() {
		$(this).find(".ceMuskDiv").css({
			opacity: 0.6
		});
	});
	$("#viewAllButton").click(function() {
		window.location.href='catagoryCemetery.html';
	});
</script>
</html>