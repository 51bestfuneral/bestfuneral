<!DOCTYPE html >
<head id="head">
<title>念念--支付方式</title>
<meta name="description" content="念念网致力于打造智能葬礼产品和服务定制工具，已实现“殡葬服务价格透明化、互联网化、个性化”为己任。业务范围辐射上海及长三角地区，与多家墓地寺庙建立合作关系。" /> 
<meta name="keywords" content="念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务, 念念,念念网,葬礼定制,殡葬,上海殡葬,殡葬服务, 骨灰盒，骨灰坛，寿衣，日本骨灰盒，葬礼花费，佛事服务" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
<meta http-equiv="pragma" content="no-cache" /> 
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-script-type" content="text/javascript" /> 
</head>
<script src="/js/jquery-2.1.4.js"></script>
<script src="/js/jquery-ui.js"></script>
<script src="/js/sliderx.js"></script>
<script src="/js/angular-1.4.0-rc.2/angular.js"></script>
<link href="/js/bootstrap-3.3.6-dist/css/bootstrap.css" rel="stylesheet">
<script src="/js/bootstrap-3.3.6-dist/js/bootstrap.js"></script>
<script src="/js/generalUsage.js"></script>
<style>
@media (min-width: 900px) {
  .container {
    width: 100%;
	padding: 0px;
	min-width: 1000px;
	background-color: #F7F7F7;
  }
}
p {
    margin: 0px;
}
span {
    font-family: "Microsoft Yahei";
}
#paymentContain {
    width: 81%;
	overflow: auto;
	box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.2);
	background: #ffffff;
	margin: 0px auto;
	margin-top: 35px;
}
#infoContain {
	overflow: auto;
	width: 908px;
	margin: 0px auto;
	padding-top: 54px;
	padding-bottom: 106px;
}
#footerContain {
    background: #efefef;
	overflow: auto;
}
#footer {
    overflow: auto;
	width: 908px;
	margin: 0px auto;
	padding-top: 28px;
	padding-bottom: 28px;
	
}
#nextButton {
    width: 190px;
	height: 56px;
	border-radius: 28px;
	background: #f62f5e;
	text-align: center;
	float: right;
	cursor: pointer;
}
#nextButton p {
    font-size: 20px;
    line-height: 56px;;
    color: #ffffff;
}
#prevButton {
    width: 190px;
	height: 56px;
	border-radius: 28px;
	background: #ffffff;
	text-align: center;
	float: left;
	cursor: pointer;
}
#prevButton p {
    font-size: 20px;
    line-height: 56px;;
    color: #f62f5e;
}
.statusPointer {
    width: 20px;
	height: 20px;
	border-radius: 10px;
	background-color: #eeeeee;
	float: left;
}
.statusBar {
    width: 270px;
	height: 7px;
	background: #eeeeee;
	margin-left: 3px;
	margin-right: 3px;
	float: left;
	margin-top: 6px;
}
#paymentStatusDesc {
    width: 100%;
	margin-top: 27px;
	overflow: auto;
	padding-bottom: 28px;
}
.descDiv {
    overflow: auto;
	float: left;
}
.first {
    margin-right: 250px;
}
.second {
    margin-right: 260px;
}
.last {
    float: right!important;
	margin-right: 0px!important;
}
.descDiv p {
    font-size: 19px;
    line-height: 1.5;
    color: #2e2e2e;
	font-weight: bold;
}
#paymentStatusDesc .selected {
    color: #f62f5e;
}
#paymentStatus .selected {
	background: #f62f5e;
}
#paymentMethod {
    width: 100%;
	overflow: auto;
	padding-top: 20px;
	text-align :center;
}
.singleMethod {
	background-size: 20%;
    width: 30%;
	margin-right: 5%;
	overflow: auto;
	float: left;
	border-radius: 2.8px;
    background-color: #f9f9f9;
    border: solid 1.4px #d8d8d8;
}
.methodTop {
    overflow: auto;
	width: 100%;
	text-align: center;
	height: 90px;
}

.methodTop img{
   margin-top:10px;
   width:150px;
   height:80px
}

.methodBottom {
    overflow: auto;
	width: 100%;
	text-align: center;
	height: 50px;
}
.methodBottom span {
    font-size: 19px;

}
.fieldInd {
    overflow: auto;
	float: left;
	margin-right: 25px;
	margin-top: 15px;
}
.longField {
    width: 440px;
}
.shortField {
    width: 208px;
}
.normalField {
    width: 242px;
}
.shorterField {
    width: 170px;
}
.lastField {
    margin-right: 0px!important;
}
.normalField {
    width: 242px;
	overflow: auto;
	float: left;
}
.fieldDesc {
    width: 100%;
	height: 44px;
}
.fieldDesc p {
    font-size: 19px;
    line-height: 44px;
    color: #b4b4b4;
	font-weight: bold;
}
.fieldContent {
    width: 100%;
	height: 56px;
}
.fieldContent input {
    height: 56px;
	width: 100%;
	font-size: 25px;
	font-family: "Microsoft Yahei";
}
.inputSub {
    width: 22px;
	height: 56px;
	margin-top: -56px;
	float:right;
	margin-right: 15px;
}
.inputSub span {
    line-height: 55px;
	font-size: 20px;
}
</style>
<script type="text/javascript">	
		var length = location.search.length;
var wishOrderId= location.search.substring(13, length);
	
	
      var app = angular.module('payment', []);
      
     	app.controller('pay', function($scope, $http) {
	    	$http.get("/alipay/createOrder?wishOrderId="+wishOrderId).success(function(response) {
	           
	           $scope.order=response;   
	           $("#tradeNo").val($scope.order.orderNo);
	           $("#subject").val($scope.order.subject);
	           $("#totalFee").val($scope.order.payableAmount); 
	           $("#chnTradeNo").val($scope.order.orderNo);
	           $("#chnTotalFee").val($scope.order.payableAmount);
	           $("#awishOrderId").val($scope.order.wishOrderId);
	           $("#cwishOrderId").val($scope.order.wishOrderId);

	           
	           $("#nextButton").show();
	           
	           
	           
			});
	    
	    	$scope.pay = function(){ 
	    		
	    		
	    		
	    		 $("#alipayButton").click();
	       	var payType = $("input[name='optionsRadios']:checked").val();
	      	  if(payType==1){
	      		  $("#chinapnrButton").click();
	      	  }
	   		  if(payType==2){
	   			  $("#alipayButton").click();
	     	  }
	 

	   };
	    
     
  });
       	

</script>
<body ng-app="payment" ng-controller="pay">
<div class="container">
<div class="topBarDiv">
<IFRAME NAME="content_frame" width=100% SRC="/component/topBar.html?cat=product" frameborder = 0 height = "65px"></IFRAME>
</div>
<div class="container">
<div id="paymentContain">
    <div id="infoContain">
	    <div id="paymentStatus">
		     <div class="statusPointer selected">
			 </div>
			 <div class="statusBar selected">
			 </div>
			 <div class="statusPointer selected">
			 </div>
			 <div class="statusBar selected">
			 </div>
			 <div class="statusPointer selected">
			 </div>
			 <div class="statusBar">
			 </div>
			 <div class="statusPointer">
			 </div>
		</div>
		<div id="paymentStatusDesc">
		     <div class="descDiv first">
			     <p class="selected">寄送</p>
			 </div>
			 <div class="descDiv second">
			     <p class="selected">确认</p>
			 </div>
			 <div class="descDiv">
			     <p class="selected">支付</p>
			 </div>
			 <div class="descDiv last">
			     <p>核对</p>
			 </div>
		</div>
		<div id="paymentMethod">
		    <div class="singleMethod">
			    <div class="methodTop">
				    <img src="/js/images/wangyin.png"></img>
				</div>
				<div class="methodBottom">
				    <input type="radio" name="optionsRadios" id="optionsRadios1" value="1" checked>
			        <span class="radioDesc">网银支付</span>
			        
			         <form name="chinapnrpayment" action="/funeral/pages/chinapnrapi.jsp" method="post" target="_blank">
						<input type="hidden" id="chnTradeNo" name="OrdId"/>
						<input type="hidden" id="chnTotalFee" name="OrdAmt" />
						<input type="hidden" id="chnPhone" name="UsrMp"/>
					  <input type="hidden" id="cwishOrderId" name="cwishOrderId"/>

                        <span class="new-btn-login-sp">
                            <button id="chinapnrButton" style="display:none" type="submit" style="text-align:center;">确 认</button>
                        </span>
					</form>
				</div>
			</div>
			<div class="singleMethod">
			    <div class="methodTop">
				    <img src="/js/images/zhifubao.png" ></img>
				</div>
				<div class="methodBottom">
				    <input type="radio" name="optionsRadios" id="optionsRadios2" value="option1">
			        <span class="radioDesc">支付宝支付</span>
			        <form name="alipayment" action="alipayapi.jsp" method="post" target="_blank">
						<input type="hidden" id="tradeNo"  name="WIDout_trade_no"  />
					    <input type="hidden" id="subject" name="WIDsubject" value="test" />
						<input type="hidden" id="totalFee" name="WIDtotal_fee" />
						<input type="hidden" name="WIDbody" value="test"/>
											  <input type="hidden" id="awishOrderId" name="awishOrderId"/>

                        <span class="new-btn-login-sp">
                            <button id="alipayButton" style="display:none" type="submit" style="text-align:center;">确 认</button>
                        </span>
					</form>
				</div>
			</div>
			
			
			<div class="singleMethod" hidden>
			    <div class="methodTop">
				    <img></img>
					<img></img>
				</div>
				<div class="methodBottom">
				    <input type="radio" name="optionsRadios" id="optionsRadios3" value="option1">
			        <span class="radioDesc">货到付款</span>
				</div>
			</div>
		</div>
	
			
			</div>
		</div>
	</div>
	<div id="footerContain">
	    <div id="footer">
		    <div id="prevButton">
			    <p>返回</p>
			</div>
		    <div id="nextButton" ng-click="pay()" >
			    <p>下一步</p>
			</div>
		</div>
	</div>
</div>
<IFRAME NAME="content_frame" width=100% height=246 marginwidth=0 marginheight=0 SRC="/component/bottomBar.html" frameborder = 0></IFRAME>
</div>
<div class="coverDiv" hidden>
<div class="titleDiv">
<h1>物品详细信息</h1>
</div>
<IFRAME class="detailFrame" width=1165px marginwidth=0 marginheight=0 SRC="#" frameborder = 0></IFRAME>
<div class="closeCoverDiv"><span class="glyphicon glyphicon-remove"></span></div>
</div>
</body>
<script>
window.onload=function(){
    $("#prevButton").click(function () {
	    window.location.href='paymentConfirm.html?wishOrderId='+wishOrderId;
	});


	
$("#optionsRadios1").click(function () {
$("#creditName").attr('disabled',false); 
$("#creditNo").attr('disabled',false); 
$("#creditExpiredDate").attr('disabled',false); 
$("#CVcode").attr('disabled',false); 


	});
		
	
$("#optionsRadios2").click(function () {
$("#creditName").attr('disabled',true); 
$("#creditNo").attr('disabled',true); 
$("#creditExpiredDate").attr('disabled',true); 
$("#CVcode").attr('disabled',true); 

	});
	
	
//$("#nextButton").hide();  	
	
	//$("#nextButton").click(function () {
	 //  window.location.href='paymentFinal.html';
	//});
};
</script>
</html>